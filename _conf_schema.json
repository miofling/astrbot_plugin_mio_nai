{
  "general_settings": {
    "description": "通用设置",
    "type": "object",
    "items": {
      "enable_assist": {
        "description": "启用自然语言辅助触发（提到 mio 且包含画图意图）",
        "type": "bool",
        "default": true
      },
      "send_processing_text": {
        "description": "接收请求后先发送排队提示",
        "type": "bool",
        "default": true
      },
      "echo_meta": {
        "description": "回图时附带 seed、耗时与最终 prompt",
        "type": "bool",
        "default": true
      },
      "opus_mode": {
        "description": "启用 Opus 参数兼容模式",
        "type": "bool",
        "default": true
      },
      "bot_names": {
        "description": "机器人唤醒名列表",
        "type": "list",
        "default": [
          "mio",
          "米欧"
        ]
      },
      "draw_keywords": {
        "description": "判定为画图请求的关键词列表",
        "type": "list",
        "default": [
          "画",
          "画图",
          "生图",
          "绘图",
          "生成",
          "来一张",
          "来张"
        ]
      }
    }
  },
  "request_settings": {
    "description": "请求设置",
    "type": "object",
    "items": {
      "nai_api_url": {
        "description": "NovelAI 中转 API 地址",
        "type": "string",
        "default": "https://ai.mio-ai.cyou/ai/generate-image"
      },
      "nai_api_key": {
        "description": "NovelAI API Key（Bearer）",
        "type": "string",
        "default": ""
      },
      "worker_token": {
        "description": "可选：Worker 额外校验头 X-Worker-Token",
        "type": "string",
        "default": ""
      },
      "http_user_agent": {
        "description": "请求使用的 User-Agent（用于减少被网关误拦）",
        "type": "string",
        "default": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36"
      },
      "nai_model": {
        "description": "默认模型",
        "type": "string",
        "default": "nai-diffusion-4-5-full"
      },
      "width": {
        "description": "出图宽度",
        "type": "int",
        "default": 832
      },
      "height": {
        "description": "出图高度",
        "type": "int",
        "default": 1216
      },
      "steps": {
        "description": "采样步数",
        "type": "int",
        "default": 28
      },
      "scale": {
        "description": "CFG Scale",
        "type": "float",
        "default": 6.0
      },
      "sampler": {
        "description": "采样器",
        "type": "string",
        "default": "k_euler_ancestral"
      },
      "seed": {
        "description": "随机种子（-1 表示每次随机）",
        "type": "int",
        "default": -1
      },
      "timeout_sec": {
        "description": "绘图请求超时秒数",
        "type": "int",
        "default": 120
      },
      "log_request_payload": {
        "description": "输出 NAI 请求 JSON 到平台日志（调试用）",
        "type": "bool",
        "default": false
      }
    }
  },
  "prompt_settings": {
    "description": "提示词设置",
    "type": "object",
    "items": {
      "default_positive_tags": {
        "description": "默认正面 tags",
        "type": "text",
        "default": "best quality, very aesthetic, absurdres"
      },
      "append_positive_tags": {
        "description": "每次自动追加的正面 tags",
        "type": "text",
        "default": "best quality, 8k"
      },
      "default_negative_tags": {
        "description": "默认负面 tags",
        "type": "text",
        "default": "lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry"
      }
    }
  },
  "permission_settings": {
    "description": "权限与白名单",
    "type": "object",
    "items": {
      "whitelist_group_ids": {
        "description": "允许画图的群号白名单（空列表表示不限制）",
        "type": "list",
        "default": []
      },
      "admin_user_ids": {
        "description": "额外管理员 QQ 列表（可改配置）",
        "type": "list",
        "default": []
      }
    }
  },
  "llm_settings": {
    "description": "LLM 优化设置",
    "type": "object",
    "items": {
      "llm_enable": {
        "description": "开启后先用 LLM 把自然语言转为 tags",
        "type": "bool",
        "default": true
      },
      "llm_provider_id": {
        "_special": "select_provider",
        "description": "用于将自然语言转为 tags 的模型（从 AstrBot 已接入模型中选择）",
        "type": "string",
        "default": ""
      },
      "llm_api_url": {
        "description": "外部 LLM 中转 URL（可选兜底，OpenAI 兼容）",
        "type": "string",
        "default": ""
      },
      "llm_api_key": {
        "description": "LLM Key（Bearer）",
        "type": "string",
        "default": ""
      },
      "llm_model": {
        "description": "LLM 模型名",
        "type": "string",
        "default": ""
      },
      "llm_timeout_sec": {
        "description": "LLM 请求超时秒数",
        "type": "int",
        "default": 60
      },
      "llm_system_prompt": {
        "description": "LLM 的系统提示词（要求只输出逗号分隔 tags）",
        "type": "text",
        "default": "You are a prompt engineer for NovelAI anime image generation. Convert user request or chat context into concise English booru-style tags. Output ONLY comma-separated tags, no explanations, no markdown."
      }
    }
  },
  "auto_draw_settings": {
    "description": "自动画图设置",
    "type": "object",
    "items": {
      "auto_enabled": {
        "description": "启用自动画图",
        "type": "bool",
        "default": false
      },
      "auto_mode": {
        "description": "自动模式：context（上下文）或 random（随机池）",
        "type": "string",
        "default": "context"
      },
      "auto_min_minutes": {
        "description": "最小触发间隔（分钟）",
        "type": "int",
        "default": 30
      },
      "auto_max_minutes": {
        "description": "最大触发间隔（分钟）",
        "type": "int",
        "default": 90
      },
      "auto_context_window": {
        "description": "上下文模式取样消息条数",
        "type": "int",
        "default": 20
      },
      "auto_queue_limit": {
        "description": "自动任务入队上限（超限则顺延）",
        "type": "int",
        "default": 3
      },
      "auto_random_prompts": {
        "description": "随机模式提示词池（留空表示暂不启用）",
        "type": "list",
        "default": []
      }
    }
  }
}
